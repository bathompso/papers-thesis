\section{BINOCS} \label{sec:binocs}
This new binary detection method is presented below, nicknamed \binocs: \textsc{Binary INformation from Open Clusters using SEDs}. The \binocs moniker will be used in reference to several different concepts throughout this paper: 
\begin{itemize*}
\item This project and body of work as a whole
\item The method of binary detection to be described below
\item The computational code which implements this method
\end{itemize*}

\subsection{The BINOCS Method} \label{sec:binocs_method}
As a first approximation, stars are blackbodies, with characteristic energy distribution curves determined solely by their temperature. By imaging a star using multiple filters (which only allow a specific range of wavelengths) across the spectrum, one should be able to ``re-build'' this blackbody curve. By comparing the rebuilt curve to blackbodies of different temperatures, one would be able to determine the temperature of the observed star. Similarly, a binary system could not be accurately modelled by a single blackbody curve, but two blackbodies added together. In this theoretical scenario, if a star did not fit any single blackbody curve, but fit a combination of two curves, it would be classified as a binary system with component stars having the associated temperatures.

In practice, stars are not blackbodies, but the main premise stays the same. Stellar structure models exist which predict the \emph{spectral energy distribution} (SED) of a star given its parameters: age, metallicity, mass. Given that the star is a member of a cluster with known parameters, age and metallicity are known. By matching stars to these models, mass can be determined, similar to how temperature could be determined in the idealize blackbody case. If a star does not fit any of the single-star SEDs, it is determined to be a binary system, and is compared to combinations of SEDs.

\begin{figure}
\begin{center}
\includegraphics[trim= 7mm 125mm 5mm 5mm, clip, width=0.9\textwidth]{../plots/eps/binocs_example.eps}
\parbox{0.9\textwidth}{\caption{Comparison of star in open cluster M67 with model SEDs. Observed data in 11 filters shown in red. \emph{(Left)} Observed SED compared to two best-fit single models. \emph{(Right)} Observed SED compared to best-fit binary model.\label{fig:binocsexample}}}
\end{center}
\end{figure}

An example of this method is shown in figure \ref{fig:binocsexample}. A star within the open cluster M67 (NGC 2682) was imaged in 11 filters, $ugriJHK_S$[3.6][4.5][5.8][8.0], and an SED was created. This observed SED was compared to all available single-star models for the cluster, producing two close-fitting models. As seen in the left panel of figure \ref{fig:binocsexample}, the 1.024 M$_\odot$ model fits the optical region of the observed SED, but diverges for the IR. The 1.062 M$_\odot$ model fits much more accurately in the mid-IR, but overestimates the flux in the optical. There are no single-star model SED which approximates what was observed, but when compared to binary SED models, the data is fit much more closely. This star was classified as a single star in a previous RV study of M67 \citep{Mathieu:1997tk}, but from this comparison of the SED it is most likely a binary system.

\subsection{The BINOCS Code} \label{sec:binocs_code}
Star clusters often contain thousands of stars, which need to be compared to tens of thousands of SED models; these comparison cannot be done by hands, a computational code is necessary. The \binocs code used in this work is publicly available from GitHub\footnote{\url{http://github.com/bathompso/binocs}} as a Python module.

The \binocs code first creates a library of synthetic binary SEDs. Using a stellar structure model called an \emph{isochrone}, the code reads in all single-star model SEDs: magnitude measurements in all 17 possible bands ($UBVRIugrizJHK_S$[3.6][4.5][5.8][8.0]) for stars with varying mass in the cluster. The isochrone magnitudes are shifted to the distance of the cluster being observed, using \eqref{eq:MagnitudeDistanceRel}, and adjusted for extinction.

Isochrones often come in coarse mass grids, however, hampering the code's ability to accurately determine masses. To overcome this, stellar parameters and magnitude are cubically interpolated with respect to mass onto a new mass grid. For most clusters, a grid spacing of 0.1 M$_\odot$ is used. Using these newly-interpolated single-star models, the \binocs code creates binary models by combining filter fluxes from the component primary and secondary models:
\begin{equation}
V_{binary} = -2.5 \log_{10} \left( F_{V,primary} + F_{V,secondary} \right)
\end{equation}
\begin{equation} \label{eq:binflux}
V_{binary} = -2.5 \log_{10} = \left( 10^{ -V_{primary}/2.5} + 10^{ -V_{secondary}/2.5} \right)
\end{equation}

Using \eqref{eq:binflux} for each of the 17 filters, binary SEDs can be created for every possible configuration.

Next, each observed star is compared to every binary SED model using:
\begin{equation} \label{eq:binocskernel}
\Phi = \sum_{\text{filters}} \frac{1}{m_{\text{star}} - m_{\text{model}} + 0.01}
\end{equation}

If any of the elements of the sum is $< 10$, meaning that the difference in magnitudes is $> 0.1$ (well above the usual observational uncertainty), then the filter is considered ``bad'' and not included in computing $\Phi$. To ensure a quality comparison, a model must have two of five ``good'' optical filters (from $UBVRI$ or $ugriz$) , two of three near-IR filters considered ``good'', and two of four mid-IR filters marked ``good.'' After removing those models without enough good filters, all $\Phi$ values are divided by the number of filters used in the sum. This ensures that a worse-fitting model will not be chosen over a better-fitting one simply because it may be marked ``good'' for more filters. The model with the highest $\Phi$ per filter is chosen as the best-fit model, and recorded. If no models have enough good filters, the star is marked as a \emph{non-member}.

When taking an image of a cluster, stars that are not part of the cluster will also be included: star within the field of view of the telescope but not within the bounds of the cluster, or stars in front of or behind the cluster. These stars contaminate a plotted CMD: bright stars that are at a further distance than the cluster may intersect with the cluster's main sequence. Because open clusters are formed in the disk of the Milky Way, where there are many field stars, this contamination can be significant. Two-band detection cannot disentangle these contaminants, throwing off some of their measurements. Using a wide wavelength range allowed the \binocs code to disentangle some of these problem stars. Although a star may lie on the main sequence in an optical CMD, it may lie far off of it in the IR. By removing stars without the necessary ``good'' magnitudes, much of the contamination which plagues two-band methods can be avoided.

The observed data has uncertainty, and the \binocs method is iterated 500 times to account for this. At the beginning of every fitting, each magnitude is varied randomly using a gaussian distribution where $\sigma =$ the magnitude's associated uncertainty. The fitting is run, and a best-fit model is recorded for each iteration. If the majority of fits of a star classify it as a non-member, then it is deemed a non-member overall. For member stars, best-fit primary and secondary masses are determined to be the median of all best-fit models.

By relying on, at minimum, 8 filters, individual observational uncertainties become much less important than in the two-band method. The degeneracies that plague that method are severely reduced, allowing accurate mass determinations over nearly the entire mass range available in the cluster. Additionally, because imaging data is relied upon instead of spectroscopy, limited telescope time is needed. Assuming access to the right instruments, all necessary data can be obtained in a few nights, making this approach highly efficient.\\

\S\ref{sec:data} will give an overview of instruments used to collect the data necessary for the \binocs routine, the sample of clusters to be used in answering the science questions, and what data is available for each cluster. \S\ref{sec:isochrones} will explore the stellar structure models used to create the comparison SEDs: the mass results from the \binocs code are only as good as the underlying models themselves. \S\ref{sec:testing} will test some of the assumptions made in the description of the \binocs code above (number of ``good'' filters, number of iterations), as well as compare the results of the SED fitting to that of previously-published RV studies. \S\ref{sec:radial} and \S\ref{sec:primordial} will use the \binocs results to answer the science questions posed in \S\ref{sec:questions}

